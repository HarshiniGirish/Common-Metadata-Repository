#
# API Endpoints
#
ousBatchGenerate:
  handler: cmr.ous.app.handler.collection.batch_generate
  timeout: ${env:LAMBDA_TIMEOUT}
  warmup:
    concurrency: ${env:WARM_LAMBDA_COUNT}
  events:
    - http:
        method: post
        path: service-bridge/ous/collection

ousGenerateUrls:
  handler: cmr.ous.app.handler.collection.generate_urls
  timeout: ${env:LAMBDA_TIMEOUT}
  warmup:
    concurrency: ${env:WARM_LAMBDA_COUNT}
  events:
    - http:
        method: get
        path: service-bridge/ous/collection/{concept-id}
    - http:
        method: post
        path: service-bridge/ous/collection/{concept-id}

ousStreamCollectionUrls:
  handler: cmr.ous.app.handler.collection.stream_urls
  timeout: ${env:LAMBDA_TIMEOUT}
  warmup:
    concurrency: ${env:WARM_LAMBDA_COUNT}
  events:
    - http:
        method: get
        path: /service-bridge/ous/streaming-collection/{concept-id}

health:
  handler: cmr.opendap.app.handler.core.health
  timeout: ${env:LAMBDA_TIMEOUT}
  warmup:
    concurrency: ${env:WARM_LAMBDA_COUNT}
  events:
    - http:
        method: get
        path: /service-bridge/health

healthOptions:
  handler: cmr.http.kit.app.handler.ok
  timeout: ${env:LAMBDA_TIMEOUT}
  warmup:
    concurrency: ${env:WARM_LAMBDA_COUNT}
  events:
    - http:
        method: options
        path: /service-bridge/health

#
# Administration Endpoints
#
lookup:
  handler: cmr.ous.app.handler.auth_cache.lookup
  timeout: ${env:LAMBDA_TIMEOUT}
  warmup:
    concurrency: ${env:WARM_LAMBDA_COUNT}
  events:
    - http:
        method: get
        path: /service-bridge/cache/auth/{item-key}
    - http:
        method: get
        path: /service-bridge/cache/concept/{item-key}

lookupAll:
  handler: cmr.ous.app.handler.auth_cache.lookup_all
  timeout: ${env:LAMBDA_TIMEOUT}
  warmup:
    concurrency: ${env:WARM_LAMBDA_COUNT}
  events:
    - http:
        method: get
        path: /service-bridge/cache/auth
    - http:
        method: get
        path: /service-bridge/cache/concept

evict:
  handler: cmr.ous.app.handler.auth_cache.evict
  timeout: ${env:LAMBDA_TIMEOUT}
  warmup:
    concurrency: ${env:WARM_LAMBDA_COUNT}
  events:
    - http:
        method: delete
        path: /service-bridge/cache/auth/{item-key}
    - http:
        method: delete
        path: /service-bridge/cache/concept/{item-key}

evictAll:
  handler: cmr.ous.app.handler.auth_cache.evict_all
  timeout: ${env:LAMBDA_TIMEOUT}
  warmup:
    concurrency: ${env:WARM_LAMBDA_COUNT}
  events:
    - http:
        method: delete
        path: /service-bridge/cache/auth
    - http:
        method: delete
        path: /service-bridge/cache/concept

#
# Documentation Endpoints
#
serivceBridgeDocs:
  handler: cmr.http.kit.app.handler.dynamic_page
  timeout: ${env:LAMBDA_TIMEOUT}
  warmup:
    concurrency: ${env:WARM_LAMBDA_COUNT}
  events:
    - http:
        method: get
        path: /service-bridge/docs
    - http:
        method: get
        path: /service-bridge

serviceBridgeRobots:
  handler: cmr.http.kit.app.handler.permanent_redirect
  timeout: ${env:LAMBDA_TIMEOUT}
  warmup:
    concurrency: ${env:WARM_LAMBDA_COUNT}
  events:
    - http:
        method: get
        path: /service-bridge/robots.txt